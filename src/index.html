<!--[if IE]><![endif]-->
<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js ie7 lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js ie8 lt-ie9"> <![endif]-->
<!--[if IE 9]>         <html class="no-js ie9"> <![endif]-->
<!--[if gt IE 9]><!--> <html class="no-js"> <!--<![endif]-->
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<title>CNCjs</title>
<meta name="description" content="">
<meta name="viewport" content="width=device-width, initial-scale=1">
<!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
<link rel="shortcut icon" href="/favicon.ico">
<link rel="stylesheet" type="text/css" href="vendor/normalize/normalize.css">
<link rel="stylesheet" type="text/css" href="vendor/bootstrap/css/bootstrap.min.css">
<link rel="stylesheet" type="text/css" href="vendor/font-awesome/css/font-awesome.min.css">
<link rel="stylesheet" type="text/css" href="css/theme.css">
<link rel="stylesheet" type="text/css" href="css/app.css">
</head>
<body>
<div id="loading" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);">
    <div style="background: transparent url('loading.gif') no-repeat 0 0; height: 32px; width: 32px; display: block; margin: 0 auto;"></div>
    <div style="font-family: Arial, Helvetica, sans-serif; font-size: 13px; font-weight: normal; color: #222; text-align: center; margin-top: 10px;">Loading...</div>
</div>
<div class="hidden" data-route="workspace">
    <div class="form-group clearfix">
        <div class="pull-left">
            <input type="text" class="form-control" data-name="port" readonly value="" />
        </div>
        <div class="btn-group pull-right">
            <button type="button" class="btn btn-danger" data-name="btn-close"><i class="fa fa-power-off"></i>&nbsp;Close</button>
        </div>
    </div>
</div>
<div class="hidden" data-route="connection">

    <div class="form-group hidden">
        <label>Controller Type</label>
        <select class="form-control" data-name="controllerType">
            <option value="Grbl">Grbl</option>
            <option value="Smoothie">Smoothie</option>
            <option value="TinyG">TinyG</option>
        </select>
    </div>
    <div class="form-group hidden">
        <label>Port</label>
        <select class="form-control" data-name="port" value="/dev/ttyUSB0"></select>
    </div>
    <div class="form-group hidden">
        <label>Baud rate</label>
        <select class="form-control" data-name="baudrate">
            <option value="250000">250000</option>
            <option value="115200" selected>115200</option>
            <option value="57600">57600</option>
            <option value="38400">38400</option>
            <option value="19200">19200</option>
            <option value="9600">9600</option>
            <option value="4800">4800</option>
            <option value="2400">2400</option>
        </select>
    </div>
    <div class="form-group clearfix">
        <div style="padding-left: 0; height: 50vh;" class="col-xs-8">
            <input type="text" class="form-control" data-name="port" readonly value="/dev/ttyUSB0" />
            <div data-name="msg"></div>
        </div>
        <button type="button" class="col-xs-4 btn btn-primary" data-name="btn-open">Open</button>
        <div>
            <button type="button" class="col-xs-12 btn btn-primary" data-name="btn-wifi">Wifi</button>
        </div>

    </div>
</div>
<div class="hidden" data-route="wifi-settings">
    <div class="form-group">
        <label>SSID</label>
        <select id="ssid" class="form-control" data-name="ssid">
        </select>
        <input type="text" class="form-control" data-name="ssid-other" value="" />
    </div>

    <div class="form-group">
        <label>Password</label>
        <input type="password" class="form-control" data-name="wifi-password" value="" />
    </div>
    <div class="form-group" style="margin-bottom: 0 ">
        <button type="button" class="col-xs-6 btn" data-name="btn-cancel">Cancel</button>
        <button type="button" class="col-xs-6 btn btn-primary" data-name="btn-save-wifi">Save</button>
    </div>
</div>
<div class="hidden" data-route="alert">
    <H1 class="" data-name="alert-msg">

    </H1>
    <div class="form-group" style="margin-bottom: 0 ">
        <button type="button" class="col-xs-12 btn btn-primary" data-name="btn-alert">OK</button>
    </div>
</div>
<div class="hidden" data-route="axes">
    <div class="nav-panel">
        <div class="container-fluid">
            <div class="row no-gutter">
                <div class="col-xs-2">
                    <div class="btn-group btn-group-justified">
                        <div class="btn-group">
                            <div class="dropdown">
                                <button type="button" class="btn btn-default" data-name="btn-dropdown" data-toggle="dropdown">
                                    <i class="fa fa-list"></i>
                                </button>
                                <ul class="dropdown-menu" style="font-size: 36px;" role="menu">
                                    <li >
                                        <a role="menuitem" href="javascript:void(0)" onclick="cnc.controller.command('homing')"><i class="fa fa-home"></i>&nbsp;&nbsp;&nbsp;Homing</a>
                                    </li>
                                    <li>
                                        <a role="menuitem" href="javascript:void(0)" onclick="cnc.controller.command('unlock')"><i class="fa fa-unlock-alt"></i>&nbsp;&nbsp;&nbsp;Unlock Alarm</a>
                                    </li>
                                    <li>
                                        <a role="menuitem" href="javascript:void(0)" onclick="cnc.controller.command('reset')"><i class="fa fa-undo"></i>&nbsp;&nbsp;&nbsp;Reset / Reboot</a>
                                    </li>
                                    <li>
                                        <a role="menuitem" href="#/wifi-settings"><i class="fa fa-wifi"></i>&nbsp;&nbsp;&nbsp;Wifi Settings</a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-xs-6">
                    <div class="active-state" data-name="active-state"></div>
                </div>
                <div class="col-xs-4">
                    <div style="text-align: center; line-height: 34px;" data-name="ipAddress">Unknown IP Addr</div>
                </div>
            </div>
        </div>
    </div>
    <div class="control-pad">
        <div class="container-fluid">
            <div class="row no-gutter">
                <div class="col-xs-3">
                  <button
                      type="button"
                      class="btn btn-default jog-btn btn-toprow "
                      title="Spindle"
                      data-toggle="modal" data-target="#myModalSpindle"
                  >
                      Spindle
                  </button>
                </div>
                <div class="col-xs-9 btn-group" data-toggle="buttons">
                    <label style="width: 25%;" label-default="" class="btn btn-default btn-toprow  active">
                        <input type="radio" name="incButtons" onchange="cnc.setJogIncrement(.1);" value=".1"/>.1</label>
                    <label style="width: 25%;" label-default="" class="btn btn-default btn-toprow ">
                        <input type="radio" name="incButtons" onchange="cnc.setJogIncrement(.01);" value=".01"/>.01</label>
                    <label style="width: 25%;" label-default="" class="btn btn-default btn-toprow ">
                        <input type="radio" name="incButtons" onchange="cnc.setJogIncrement(.001);" value=".001"/>.001</label>
                    <label style="width: 25%;" label-default="" class="btn btn-default btn-toprow ">
                        <input type="radio" name="incButtons" onchange="cnc.setJogIncrement(.0001);" value=".0001"/>.0001</label>
                </div>
            </div>
        </div>
    </div>
    <div class="axis-position control-pad">
        <div class="container-fluid">
            <div class="row no-gutter">

              <div class="col-xs-3">
                  <button
                      type="button"
                      class="btn btn-default jog-btn btn-toprow "
                      title="Goto"
                      data-toggle="modal" data-target="#myModal"
                  >
                      Goto
                  </button>
<!-- Modal -->
<div class="modal" id="myModal" role="dialog">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 id="travelToTitle2" class="modal-title">Travel To</h4>
      </div>
      <div class="modal-body">
        <form class="form-horizontal">
          <div class="form-group">
            <label for="travelToTitle" class="control-label col-xs-3" data-name="travelToTitle">WPos X (in): </label>
            <div class="col-xs-6">
                <input id="travelToInput" class="form-control resetOnFreshModal" type="number" step="0.0001"/>
            </div>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <div class="container-fluid">
          <div class="row no-gutter">
              <div class="col-xs-12">
                <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
              </div>
          </div>
          <br/>
          <div class="row no-gutter">
              <div class="col-xs-12">
                <button id="myModalOk" type="button" class="btn btn-primary" data-dismiss="modal"
                    onclick="var params = {}; params[view.getJogAxis()] =  document.getElementById('travelToInput').value; cnc.move(params);">OK</button>
              </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>


<!-- Modal Tool Offset -->
<div class="modal" id="myModalToolOffset" role="dialog">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 id="toolOffsetTitle" class="modal-title">Tool Offset</h4>
      </div>
      <div class="modal-body">
        <form class="form-horizontal">
          <div class="form-group">
            <label for="offsetInput" class="control-label col-xs-3" data-name="offsetTitle">Offset X (in): </label>
            <div class="col-xs-6">
                <input id="offsetInput" class="form-control resetOnFreshModal" type="number" step="0.0001" value="0"/>
            </div>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <div class="container-fluid">
          <div class="row no-gutter">
              <div class="col-xs-12">
                <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
              </div>
          </div>
          <br/>
          <div class="row no-gutter">
              <div class="col-xs-12">
                <button id="myModalToolOffsetOk" type="button" class="btn btn-primary" data-dismiss="modal"
                    onclick="cnc.zeroMachine(document.getElementById('offsetInput').value);">OK</button>
              </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Spindle Modal -->
<div class="modal" id="myModalSpindle" role="dialog">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 id="spindleTitle" data-name="spindleTitle" class="modal-title">Spindle</h4>
      </div>
      <div class="modal-body">
        <div class="container-fluid">
            <form class="form-horizontal">
              <div class="form-group">
                <label for="spindleInput" class="control-label col-xs-3">Speed (1-255): </label>
                <div class="col-xs-6">
                    <input id="spindleInput" class="form-control resetOnFreshModal" type="number" step="1" min="1" max="255" value="255"/>
                </div>
              </div>
            </form>
        </div>
      </div>
      <div class="modal-footer">
        <div class="container-fluid">
            <div class="row no-gutter">
                <div class="col-xs-12">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                </div>
            </div>
            <br/>
            <div class="row no-gutter">
                <div class="col-xs-6">
                  <button id="myModalSpindleM3" type="button" class="btn btn-primary" data-dismiss="modal"
                      onclick="cnc.spindleM3(document.getElementById('spindleInput').value);">M3</button>
                </div>
                <div class="col-xs-6">
                  <button id="myModalSpindleM5" type="button" class="btn btn-default" data-dismiss="modal"
                          onclick="cnc.spindleM5();">M5</button>
                </div>
            </div>
        </div>
      </div>
    </div>
  </div>
</div>

              </div>
              <div class="col-xs-9 btn-group" data-toggle="buttons">
                <label style="width: 33.33%;" label-default="" class="btn btn-default btn-toprow active">
                    <input type="radio" name="xyzButtons" onchange="cnc.setJogAxis('X');">X</label>
                <label style="width: 33.33%;" label-default="" class="btn btn-default btn-toprow ">
                    <input type="radio" name="xyzButtons" onchange="cnc.setJogAxis('Y');">Y</label>
                <label style="width: 33.33%;" label-default="" class="btn btn-default btn-toprow ">
                    <input type="radio" name="xyzButtons" onchange="cnc.setJogAxis('Z');">Z</label>
              </div>
            </div>
        </div>
    </div>
    <div class="axis-position control-pad ">
        <div class="container-fluid">
            <div class="row no-gutter">
                <div class="col-xs-3 coordinates-label" data-name="mpos-label">
                    MPos:
                </div>
                <div class="col-xs-9 coordinates-report">
                    <div class="col-xs-4">
                        <div class="axis-position" data-name="mpos-x">0.000</div>
                    </div>
                    <div class="col-xs-4">
                        <div class="axis-position" data-name="mpos-y">0.000</div>
                    </div>
                    <div class="col-xs-4">
                        <div class="axis-position" data-name="mpos-z">0.000</div>
                    </div>
                </div>
            </div>
            <div class="row no-gutter">
                <div class="col-xs-3 coordinates-label" data-name="wpos-label">
                    WPos:
                </div>
                <div class="col-xs-9 coordinates-report">
                    <div class="col-xs-4">
                        <div class="axis-position" data-name="wpos-x">0.000</div>
                    </div>
                    <div class="col-xs-4">
                        <div class="axis-position" data-name="wpos-y">0.000</div>
                    </div>
                    <div class="col-xs-4">
                        <div class="axis-position" data-name="wpos-z">0.000</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="control-pad">
        <div class="container-fluid">
            <div class="row no-gutter">
                <div class="col-xs-2">
                    <button
                        type="button"
                        class="btn btn-default double-btn"
                        title="G28"
                        onclick="cnc.sendMove('G28')"
                    >
                        G28<br/>&nbsp;
                    </button>
                </div>
                <div class="col-xs-2">
                  <button
                      type="button"
                      class="btn btn-default jog-xy-zero double-btn"
                      title="Move To Zero (G0 X0 Y0 Z0)"
                      onclick="cnc.sendMove('X0Y0Z0')"
                  >
                      G0 G54<br/>All
                  </button>
                </div>
                <div class="col-xs-2">
                    <button
                        type="button"
                        class="btn btn-default double-btn"
                        title="Move To X Zero (G0 X0)"
                        onclick="cnc.sendMove('X0')"
                    >
                        G0 G54<br/>X0
                    </button>
                </div>
                <div class="col-xs-2">
                    <button
                        type="button"
                        class="btn btn-default double-btn"
                        title="Move To Y Zero (G0 Y0)"
                        onclick="cnc.sendMove('Y0')"
                    >
                        G0 G54<br/>Y0
                    </button>
                </div>
                <div class="col-xs-2">
                    <button
                        type="button"
                        class="btn btn-default double-btn"
                        title="Move To Z Zero (G0 Z0)"
                        onclick="cnc.sendMove('Z0')"
                    >
                        G0 G54<br/>Z0
                    </button>
                </div>
                <div class="col-xs-2">
                    <button
                        type="button"
                        class="btn btn-default double-btn"
                        title="Move To Zero (G0 X0 Y0 Z0)"
                        data-toggle="modal" data-target="#myModalToolOffset"
                    >
                        Set W<br/>Zero
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="/socket.io/socket.io.js"></script>
<script src="vendor/director/director.min.js"></script>
<script src="vendor/lodash/lodash.min.js"></script>
<script src="vendor/jquery/jquery-2.2.1.min.js"></script>
<script src="vendor/iframe-resizer/iframeResizer.contentWindow.min.js"></script>
<script src="vendor/js-cookie/js.cookie.js"></script>
<script src="vendor/bootstrap/js/bootstrap.min.js"></script>
<script>
$('document').ready(function() {
    var root = window;
    root.cnc = {
        router: null,
        controller: null,
        controllerType: Cookies.get('cnc.controllerType'),
        port: Cookies.get('cnc.port'),
        baudrate: Cookies.get('cnc.baudrate'),
        connected: false
    };
    root.cnc.router = window.Router({
        '/': function() {
            if (root.cnc.connected) {
                window.location = '#/axes';
            } else {
                window.location = '#/connection';
            }
        },
        '/workspace': function() {
        },
        '/connection': function() {
        },
        '/axes': function() {
        },
        '/wifi-settings': function() {
        },
        '/alert': function() {
        }
    });
    root.cnc.router.configure({
        on: function() {
            var route = window.location.hash.slice(2);
            var views = $('[data-route]');
            var view = views.filter('[data-route="' + route + '"]');

            if (view.length) {
                views.addClass('hidden');
                view.removeClass('hidden');
            }
        }
    });
});
</script>
<script src="controller.js"></script>
<script src="app.js"></script>
<script src="jogwheel.js"></script>
</body>
</html>
